#	$NetBSD: Makefile.in,v 1.7 2003/09/15 05:33:41 grant Exp $

srcdir=		@srcdir@

prefix=		@prefix@
exec_prefix=	@exec_prefix@
bindir=		@bindir@
mandir=		@mandir@

man1dir=	$(mandir)/man1
cat1dir=	$(mandir)/cat1

CC=		@CC@
CCLD=		$(CC)
LIBS=		@LIBS@
CPPFLAGS=	@CPPFLAGS@ -I. -I$(srcdir)
DEFS=		@DEFS@
CFLAGS=		@CFLAGS@
LDFLAGS=	@LDFLAGS@

INSTALL=	@INSTALL@

PROG=		pax

SRCS=	ar_io.c ar_subs.c buf_subs.c cpio.c file_subs.c ftree.c \
	gen_subs.c getoldopt.c options.c pat_rep.c pax.c sel_subs.c tables.c \
	tar.c tty_subs.c \
	getid.c spec.c misc.c stat_flags.c pack_dev.c
OBJS=	$(SRCS:.c=.o)

.PHONY: all clean install

.c.o:
	$(CC) $(DEFS) $(CPPFLAGS) $(CFLAGS) -c $<

all: $(PROG)

$(PROG): $(OBJS)
	$(CCLD) $(LDFLAGS) -o $@ $(OBJS) $(LIBS)

clean:
	rm -f $(OBJS) $(PROG)

distclean: clean
	rm -f Makefile config.cache config.h config.status
	rm -f configure.lineno config.log

install:
	$(INSTALL) -m 755 -d $(bindir)
	$(INSTALL) -m 755 -d $(man1dir)
	$(INSTALL) -m 755 -d $(cat1dir)
	$(INSTALL) $(PROG) $(bindir)
	ln -f $(bindir)/$(PROG) $(bindir)/cpio
	ln -f $(bindir)/$(PROG) $(bindir)/tar
	$(INSTALL) -m 444 $(PROG).1 $(man1dir)/$(PROG).1
	$(INSTALL) -m 444 $(PROG).cat1 $(cat1dir)/$(PROG).0
	$(INSTALL) -m 444 cpio.1 $(man1dir)/cpio.1
	$(INSTALL) -m 444 cpio.cat1 $(cat1dir)/cpio.0
	$(INSTALL) -m 444 tar.1 $(man1dir)/tar.1
	$(INSTALL) -m 444 tar.cat1 $(cat1dir)/tar.0
